# 🃏 Card Battle Game - 回合制卡牌战斗游戏

基于pygame开发的回合制卡牌战斗游戏，具有独特的罗盘机制和丰富的卡牌效果。

## 🎮 游戏特色

### 核心机制
- **🌀 罗盘系统**: 独特的12位置环形罗盘，出牌推进触发随机事件
- **🃏 卡牌战斗**: 7种基础卡牌，包含攻击、防御、治疗三大类型
- **⚡ MP管理**: 策略性的魔法值消耗和回合恢复
- **🛡️ 护甲系统**: 临时防护，每回合重置
- **🎲 随机事件**: 12种罗盘事件（6负面+6幸运），增加战斗变数

### 游戏体验
- **清晰界面**: 优化的中文字体显示，22-36px大字体易于阅读
- **智能交互**: 鼠标点击+键盘快捷键双重操作方式
- **即时反馈**: 实时战斗日志，动态颜色提示
- **平衡设计**: 精心调校的数值平衡，策略深度适中

## 🎯 操作说明

### 鼠标操作
- **点击卡牌**: 使用手牌（消耗相应MP）
- **点击"结束回合"**: 结束出牌阶段，进入敌人回合
- **点击"重新开始"**: 战斗结束后重新开始新游戏

### 键盘快捷键
- **数字键 1-5**: 快速使用对应位置的手牌
- **空格键**: 快速结束当前回合
- **R键**: 立即重新开始游戏（调试功能）
- **ESC键**: 退出游戏

## 🚀 快速开始

### 系统要求
- Python 3.7+
- Windows 10/11（已测试，自动加载微软雅黑字体）
- 1GB可用内存

### 一键启动（Windows）
```bash
# 方式1：使用批处理文件（推荐）
.\run_game.bat

# 方式2：手动运行
python main.py
```

### 手动安装
```bash
# 1. 克隆或下载项目
git clone <repository-url>
cd CardBattle

# 2. 安装依赖
pip install -r requirements.txt

# 3. 运行游戏
python main.py
```

## 🎪 游戏界面

游戏界面分为6个功能区域，采用优化的中文字体显示：

### 1. 回合信息栏（顶部）
- 当前回合数
- 当前阶段（出牌阶段/战斗阶段）

### 2. 战斗区域（中上）
- **敌人信息**: 名称、HP、攻击力
- **玩家信息**: HP、MP、攻击力、护甲值
- **罗盘显示**: 当前位置、12位置可视化

### 3. 手牌区域（中部）
- 最多5张手牌，详细信息显示
- 卡牌可用性智能判断（灰化不可用）
- 牌库剩余数量显示

### 4. 控制按钮（右侧）
- 结束回合按钮（状态感知）
- 重新开始按钮（战斗结束显示）

### 5. 战斗日志（左下）
- 滚动显示最近12条记录
- 实时战斗行动反馈

### 6. 状态信息（右下）
- 特殊状态效果显示
- 操作提示和帮助信息

## 🃏 卡牌系统

### 攻击类卡牌
- **Strike** (0 MP): 造成6+ATK点伤害，推进1格
- **Heavy Blow** (2 MP): 造成12+ATK点伤害，推进2格
- **Fireball** (3 MP): 造成15+ATK点伤害，推进3格

### 防御类卡牌
- **Block** (1 MP): 获得8点护甲，推进1格
- **Iron Will** (2 MP): 获得15点护甲，推进1格

### 治疗类卡牌
- **Heal** (2 MP): 恢复12点HP，推进1格
- **Greater Heal** (4 MP): 恢复20点HP，推进2格

## 🌀 罗盘机制

12位置环形罗盘布局：
- **6个正常位置** (■): 无特殊效果
- **5个负面位置** (□): 触发随机负面事件
- **1个幸运位置** (★): 触发随机幸运事件

### 负面事件示例
- 诅咒侵蚀：添加负面卡牌到牌库
- 黑暗能量：立即失去HP
- 精神涣散：跳过下回合出牌阶段

### 幸运事件示例
- 神圣祝福：立即恢复HP
- 魔力涌动：获得额外MP
- 战斗狂热：下次攻击伤害翻倍

## 🏗️ 项目架构

### 模块化设计
```
CardBattle/
├── main.py                 # 游戏入口
├── requirements.txt        # 依赖管理
├── run_game.bat           # Windows启动脚本
├── config/                # 配置模块
│   ├── settings.py        # 游戏设置
│   └── constants.py       # 游戏常量
├── core/                  # 核心逻辑
│   ├── game.py           # 主游戏类
│   ├── entities.py       # 玩家/敌人实体
│   ├── battle_manager.py # 战斗管理器
│   ├── card_system.py    # 卡牌系统
│   └── compass_system.py # 罗盘系统
├── data/                  # 数据定义
│   ├── cards.py          # 卡牌数据
│   └── events.py         # 事件数据
├── ui/                    # 用户界面
│   └── game_ui.py        # 游戏界面
└── utils/                 # 工具函数
    └── helpers.py        # 辅助函数
```

### 设计原则
- **单一职责**: 每个模块只负责一个核心功能
- **松耦合**: 模块间通过接口交互，便于扩展
- **高内聚**: 相关功能集中在同一模块
- **可扩展**: 易于添加新卡牌、新敌人、新机制

## 🎲 游戏流程

### 回合制战斗流程
1. **战斗开始**: 玩家vs森林哥布林
2. **出牌阶段**: 使用手牌（攻击/防御/治疗）
3. **罗盘推进**: 根据卡牌点数推进罗盘
4. **事件触发**: 根据罗盘位置触发相应事件
5. **战斗阶段**: 敌人自动攻击
6. **回合结束**: 护甲重置，MP恢复，抽牌补充
7. **胜负判定**: HP归零即败，击败敌人即胜

### 策略要素
- **MP管理**: 合理分配魔法值使用
- **护甲时机**: 预判敌人攻击，适时防御
- **罗盘控制**: 避免负面位置，争取幸运事件
- **手牌规划**: 平衡攻击、防御、治疗卡牌

## 🔧 技术信息

### 技术栈
- **游戏引擎**: Pygame 2.0+
- **开发语言**: Python 3.7+
- **设计模式**: MVC架构
- **代码规范**: 中文注释，模块化设计

### 显示特性
- **中文字体支持**: 自动加载微软雅黑/黑体/宋体
- **大字体显示**: 22-36px字体，清晰易读
- **智能布局**: 自适应字体大小的界面布局
- **颜色编码**: 动态颜色显示状态信息

### 性能特性
- **60FPS稳定运行**
- **内存占用 < 100MB**
- **响应延迟 < 16ms**
- **支持1024x768分辨率**

## 📈 扩展计划

### 潜在功能扩展
- [ ] 多种敌人类型
- [ ] 更多卡牌和事件
- [ ] 装备和升级系统
- [ ] 多语言支持
- [ ] 存档和统计功能

## 🐛 问题解决

### 常见问题
**Q: 中文字符显示为方块？**
A: 游戏会自动检测并加载Windows系统中文字体（微软雅黑/黑体/宋体），确保中文正常显示。

**Q: 字体太小看不清？**
A: 已优化为22-36px大字体，界面布局也相应调整以适应更大字体。

**Q: 游戏运行缓慢？**
A: 确保Python环境正常，关闭其他占用内存的程序。

---

**🎮 立即体验完整的卡牌战斗乐趣！运行 `.\run_game.bat` 开始你的冒险之旅！** 