# é¡¹ç›®è¿›åº¦è®°å½•

## é˜¶æ®µ1ï¼šé¡¹ç›®åŸºç¡€æ­å»º âœ… å·²å®Œæˆ

### å®Œæˆæ—¶é—´
2024å¹´å½“å‰æ—¶é—´

### å®ç°çš„åŠŸèƒ½æ¨¡å—

#### 1.1 é¡¹ç›®ç»“æ„åˆå§‹åŒ– âœ…
å·²åˆ›å»ºå®Œæ•´çš„é¡¹ç›®ç›®å½•ç»“æ„ï¼š
```
CardBattle/
â”œâ”€â”€ main.py                 # æ¸¸æˆå…¥å£ âœ…
â”œâ”€â”€ requirements.txt        # ä¾èµ–ç®¡ç† âœ…
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py        # âœ…
â”‚   â”œâ”€â”€ settings.py        # æ¸¸æˆé…ç½® âœ…
â”‚   â””â”€â”€ constants.py       # å¸¸é‡å®šä¹‰ âœ…
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ __init__.py        # âœ…
â”‚   â””â”€â”€ game.py           # æ¸¸æˆä¸»æ§åˆ¶å™¨ âœ…
â”œâ”€â”€ ui/
â”‚   â””â”€â”€ __init__.py        # âœ…
â”œâ”€â”€ data/
â”‚   â””â”€â”€ __init__.py        # âœ…
â””â”€â”€ utils/
    â””â”€â”€ __init__.py        # âœ…
```

#### 1.2 åŸºç¡€é…ç½®å®ç° âœ…
- **config/settings.py**: å±å¹•åˆ†è¾¨ç‡(1024x768)ã€å¸§ç‡(60FPS)ã€èƒŒæ™¯è‰²é…ç½®
- **config/constants.py**: æ‰‹ç‰Œæ•°é‡ã€ç½—ç›˜ä½ç½®ã€ç©å®¶/æ•Œäººåˆå§‹å±æ€§

#### 1.3 æ¸¸æˆåŸºç¡€æ¡†æ¶ âœ…
- **core/game.py**: å®ç°Gameç±»ï¼ŒåŒ…å«å®Œæ•´çš„pygameåˆå§‹åŒ–å’Œä¸»å¾ªç¯
- **main.py**: æ¸¸æˆå…¥å£ç‚¹ï¼ŒåŒ…å«é”™è¯¯å¤„ç†

#### 1.4 ä¾¿æ·è¿è¡Œå·¥å…· âœ…
- **run_game.bat**: Windowsæ‰¹å¤„ç†æ–‡ä»¶ï¼Œè‡ªåŠ¨æ£€æŸ¥ç¯å¢ƒå’Œä¾èµ–

### éªŒæ”¶æ ‡å‡†æ£€æŸ¥ âœ…

- [x] ç›®å½•ç»“æ„å®Œæ•´åˆ›å»º
- [x] å¯ä»¥è¿è¡Œç©ºçš„pygameçª—å£ï¼ˆ1024x768ï¼‰
- [x] 60FPSç¨³å®šè¿è¡Œï¼Œæ— é”™è¯¯è¾“å‡º
- [x] requirements.txtåŒ…å«pygameä¾èµ–
- [x] é…ç½®æ–‡ä»¶æ­£ç¡®åŠ è½½
- [x] æ¸¸æˆçª—å£æŒ‰é…ç½®æ˜¾ç¤º
- [x] å¸¸é‡å¯ä»¥åœ¨å…¶ä»–æ¨¡å—ä¸­æ­£ç¡®å¼•ç”¨

---

## é˜¶æ®µ2ï¼šæ ¸å¿ƒæ•°æ®ç»“æ„ âœ… å·²å®Œæˆ

### å®Œæˆæ—¶é—´
2024å¹´å½“å‰æ—¶é—´

### å®ç°çš„åŠŸèƒ½æ¨¡å—

#### 2.1 å®ä½“ç±»å®ç° âœ…
**æ–‡ä»¶**: `core/entities.py`
- **Playerç±»**: ç©å®¶è§’è‰²ç®¡ç†
  - å±æ€§ç®¡ç†ï¼šHPã€MPã€ATKã€æŠ¤ç”²
  - è¡Œä¸ºæ–¹æ³•ï¼šå—ä¼¤ã€æ²»ç–—ã€MPæ¶ˆè€—ã€æŠ¤ç”²æ“ä½œ
  - çŠ¶æ€æ£€æŸ¥ï¼šå­˜æ´»åˆ¤å®šã€çŠ¶æ€ä¿¡æ¯è·å–
- **Enemyç±»**: æ•Œäººè§’è‰²ç®¡ç†
  - åŸºç¡€å±æ€§ï¼šåç§°ã€HPã€æ”»å‡»åŠ›
  - è¡Œä¸ºæ–¹æ³•ï¼šå—ä¼¤ã€æ²»ç–—ã€æ”»å‡»ä¼¤å®³è®¡ç®—
  - çŠ¶æ€æ£€æŸ¥ï¼šå­˜æ´»åˆ¤å®šã€çŠ¶æ€ä¿¡æ¯è·å–

#### 2.2 å¡ç‰ŒåŸºç¡€ç±» âœ…
**æ–‡ä»¶**: `data/cards.py`
- **Cardç±»**: å¡ç‰Œæ•°æ®ç»“æ„
  - å±æ€§ï¼šIDã€åç§°ã€ç±»å‹ã€MPæ¶ˆè€—ã€ç½—ç›˜ç‚¹æ•°
  - æ–¹æ³•ï¼šå¯ç”¨æ€§æ£€æŸ¥ã€æ•ˆæœæ‰§è¡Œã€æ˜¾ç¤ºä¿¡æ¯
- **å¡ç‰Œæ•ˆæœå‡½æ•°**: 7ç§åŸºç¡€å¡ç‰Œæ•ˆæœ
  - æ”»å‡»ç±»ï¼šStrikeã€Heavy Blowã€Fireball
  - é˜²å¾¡ç±»ï¼šBlockã€Iron Will
  - æ²»ç–—ç±»ï¼šHealã€Greater Heal
- **è´Ÿé¢å¡ç‰Œ**: 3ç§è´Ÿé¢æ•ˆæœ
  - Curseã€Drainã€Weakness
- **å·¥å…·å‡½æ•°**: ç‰Œåº“åˆ›å»ºã€å¡ç‰ŒæŸ¥æ‰¾

#### 2.3 ç½—ç›˜ç³»ç»Ÿå®ç° âœ…
**æ–‡ä»¶**: `core/compass_system.py`
- **CompassPositionç±»**: ä½ç½®ç±»å‹å®šä¹‰
  - NORMAL (â– )ã€NEGATIVE (â–¡)ã€LUCKY (â˜…)
- **CompassSystemç±»**: ç¯å½¢ç½—ç›˜ç®¡ç†
  - 12ä½ç½®ç¯å½¢å¸ƒå±€ï¼š6æ­£å¸¸+5è´Ÿé¢+1å¹¸è¿
  - æ ¸å¿ƒåŠŸèƒ½ï¼šæ¨è¿›ã€äº‹ä»¶æ£€æŸ¥ã€å¯è§†åŒ–
  - è¾…åŠ©åŠŸèƒ½ï¼šç»Ÿè®¡ã€é‡ç½®ã€ç‰¹æ®Šä½ç½®è®¡ç®—

#### 2.4 äº‹ä»¶ç³»ç»Ÿå®ç° âœ…
**æ–‡ä»¶**: `data/events.py`
- **CompassEventç±»**: äº‹ä»¶åŸºç¡€ç»“æ„
- **è´Ÿé¢äº‹ä»¶**: 6ç§è´Ÿé¢æ•ˆæœ
  - è¯…å’’ä¾µèš€ã€é»‘æš—èƒ½é‡ã€ç²¾ç¥æ¶£æ•£
  - é­”åŠ›ç‡ƒçƒ§ã€åŠ›é‡è¡°é€€ã€å¿ƒç¥ä¸å®
- **å¹¸è¿äº‹ä»¶**: 6ç§æ­£é¢æ•ˆæœ
  - ç¥åœ£ç¥ç¦ã€é­”åŠ›æ¶ŒåŠ¨ã€æˆ˜æ–—ç‹‚çƒ­
  - å®Œç¾é˜²å¾¡ã€çµæ„Ÿè¿¸å‘ã€åŠ›é‡è§‰é†’
- **äº‹ä»¶è§¦å‘**: ç»Ÿä¸€çš„äº‹ä»¶ç®¡ç†ç³»ç»Ÿ

#### 2.5 å·¥å…·å‡½æ•°åº“ âœ…
**æ–‡ä»¶**: `utils/helpers.py`
- **æ•°å€¼è®¡ç®—**: clampã€ä¼¤å®³è®¡ç®—ã€ç™¾åˆ†æ¯”è®¡ç®—
- **æ˜¾ç¤ºæ ¼å¼åŒ–**: HP/MPæ˜¾ç¤ºã€é¢œè‰²æ˜ å°„
- **éªŒè¯å·¥å…·**: å¡ç‰Œå¯ç”¨æ€§ã€æ¸¸æˆçŠ¶æ€éªŒè¯
- **éšæœºå·¥å…·**: æ´—ç‰Œã€å¸¦æƒé‡é€‰æ‹©
- **è¾…åŠ©å·¥å…·**: æ—¥å¿—è®°å½•ã€æ–‡ä»¶åå¤„ç†

### éªŒæ”¶æ ‡å‡†æ£€æŸ¥ âœ…

- [x] Playerå’ŒEnemyç±»å¯ä»¥æ­£ç¡®åˆ›å»º
- [x] å±æ€§åˆå§‹åŒ–å€¼æ­£ç¡®
- [x] ä¼¤å®³å’Œæ²»ç–—æ–¹æ³•å·¥ä½œæ­£å¸¸
- [x] æ­»äº¡åˆ¤å®šé€»è¾‘æ­£ç¡®
- [x] å¡ç‰Œå¯¹è±¡åˆ›å»ºæ­£ç¡®
- [x] MPæ¶ˆè€—æ£€æŸ¥åŠŸèƒ½æ­£å¸¸
- [x] åŸºç¡€æ•ˆæœå‡½æ•°æ­£ç¡®æ‰§è¡Œ
- [x] è‡³å°‘7å¼ ä¸åŒç±»å‹å¡ç‰Œå¯ç”¨
- [x] ç½—ç›˜èƒ½æ­£ç¡®æ¨è¿›ä»»æ„æ­¥æ•°
- [x] äº‹ä»¶ç±»å‹åˆ¤æ–­å‡†ç¡®
- [x] å¯è§†åŒ–æ˜¾ç¤ºæ­£ç¡®
- [x] 12ä½ç½®å¾ªç¯é€»è¾‘æ— è¯¯
- [x] æ¯ç§äº‹ä»¶æ•ˆæœæ­£ç¡®å®šä¹‰
- [x] è´Ÿé¢å’Œå¹¸è¿äº‹ä»¶åº“å®Œæ•´

### æŠ€æœ¯å®ç°è¯¦æƒ…

#### æ¨¡å—åŒ–è®¾è®¡æ¶æ„
```
core/               # æ ¸å¿ƒé€»è¾‘æ¨¡å—
â”œâ”€â”€ entities.py     # å®ä½“ç±»ï¼ˆPlayerã€Enemyï¼‰
â”œâ”€â”€ compass_system.py # ç½—ç›˜ç³»ç»Ÿ
â””â”€â”€ game.py         # æ¸¸æˆä¸»æ§åˆ¶å™¨

data/               # æ•°æ®å®šä¹‰æ¨¡å—  
â”œâ”€â”€ cards.py        # å¡ç‰Œç³»ç»Ÿå’Œæ•ˆæœ
â””â”€â”€ events.py       # ç½—ç›˜äº‹ä»¶ç³»ç»Ÿ

utils/              # å·¥å…·å‡½æ•°æ¨¡å—
â””â”€â”€ helpers.py      # è¾…åŠ©å‡½æ•°å’ŒéªŒè¯å·¥å…·
```

#### æ ¸å¿ƒç±»å…³ç³»å›¾
```
Player â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç®¡ç†çŠ¶æ€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Enemy
  â”‚                                        â”‚
  â”‚                                        â”‚
  â””â”€â”€â”€ ä½¿ç”¨å¡ç‰Œ â”€â”€â”€â”€ Card â”€â”€â”€â”€ è§¦å‘äº‹ä»¶ â”€â”€â”€â”€ CompassSystem
                      â”‚                      â”‚
                      â”‚                      â”‚
                   å¡ç‰Œæ•ˆæœ              CompassEvent
```

#### æ–‡æ¡£å…³è”
- å¯¹åº” [å®æ–½è®¡åˆ’æ–‡æ¡£](doc/implementation_plan.md#é˜¶æ®µ2æ ¸å¿ƒæ•°æ®ç»“æ„1-2å¤©)
- å¯¹åº” [è®¾è®¡æ–‡æ¡£](doc/pygame_game_design.md#æ ¸å¿ƒæ¨¡å—è®¾è®¡)

### ä¸‹ä¸€é˜¶æ®µå‡†å¤‡
**é˜¶æ®µ3ï¼šç½—ç›˜ç³»ç»Ÿå®ç°** å·²é€šè¿‡æ¨¡å—åŒ–è®¾è®¡æå‰å®Œæˆ
**é˜¶æ®µ4ï¼šå¡ç‰Œç³»ç»Ÿå®ç°** å·²é€šè¿‡æ¨¡å—åŒ–è®¾è®¡æå‰å®Œæˆ
**é˜¶æ®µ5ï¼šæˆ˜æ–—ç®¡ç†å™¨** å‡†å¤‡å°±ç»ª
- BattleManagerç±»å®ç°
- BattleContextä¸Šä¸‹æ–‡ç®¡ç†
- å›åˆåˆ¶æˆ˜æ–—æµç¨‹

---

## é˜¶æ®µ5ï¼šæˆ˜æ–—ç®¡ç†å™¨ âœ… å·²å®Œæˆ

### å®Œæˆæ—¶é—´
2024å¹´å½“å‰æ—¶é—´

### å®ç°çš„åŠŸèƒ½æ¨¡å—

#### 5.1 æˆ˜æ–—ä¸Šä¸‹æ–‡ç®¡ç† âœ…
**æ–‡ä»¶**: `core/battle_manager.py`
- **BattleContextç±»**: æˆ˜æ–—ä¸Šä¸‹æ–‡ç®¡ç†
  - å®ä½“å¼•ç”¨ï¼šplayerã€enemyã€card_systemã€compass
  - ç‰¹æ®ŠçŠ¶æ€ï¼šskip_next_turnã€double_next_attack
  - æ—¥å¿—ç³»ç»Ÿï¼šæˆ˜æ–—è¡ŒåŠ¨è®°å½•å’Œæ˜¾ç¤º
  - äº‹ä»¶å¤„ç†ï¼šç½—ç›˜äº‹ä»¶è§¦å‘å’Œæ•ˆæœæ‰§è¡Œ

#### 5.2 å›åˆåˆ¶æˆ˜æ–—æ ¸å¿ƒ âœ…
**æ–‡ä»¶**: `core/battle_manager.py`
- **BattleManagerç±»**: å®Œæ•´çš„æˆ˜æ–—æµç¨‹æ§åˆ¶
  - å›åˆç®¡ç†ï¼šCARD_PHASEã€BATTLE_PHASEåˆ‡æ¢
  - å‡ºç‰Œç³»ç»Ÿï¼šå¡ç‰Œä½¿ç”¨ã€MPæ¶ˆè€—ã€æ•ˆæœæ‰§è¡Œ
  - æ•ŒäººAIï¼šè‡ªåŠ¨æ”»å‡»ã€ä¼¤å®³è®¡ç®—
  - èƒœè´Ÿåˆ¤å®šï¼šHPå½’é›¶æ£€æŸ¥ã€æˆ˜æ–—ç»“æŸå¤„ç†

#### 5.3 å¡ç‰Œç³»ç»Ÿç®¡ç† âœ…
**æ–‡ä»¶**: `core/card_system.py`
- **CardSystemç±»**: å®Œæ•´çš„å¡ç‰Œç®¡ç†
  - ç‰Œåº“ç®¡ç†ï¼šæŠ½ç‰Œã€æ´—ç‰Œã€å¼ƒç‰Œå †
  - æ‰‹ç‰Œæ“ä½œï¼šè¡¥å……æ‰‹ç‰Œã€å‡ºç‰ŒéªŒè¯
  - è´Ÿé¢å¡ç‰Œï¼šåŠ¨æ€æ’å…¥æœºåˆ¶
  - çŠ¶æ€æŸ¥è¯¢ï¼šç‰Œåº“æ•°é‡ã€æ‰‹ç‰Œä¿¡æ¯

---

## é˜¶æ®µ6ï¼šåŸºç¡€UIå®ç° âœ… å·²å®Œæˆ

### å®Œæˆæ—¶é—´
2024å¹´å½“å‰æ—¶é—´

### å®ç°çš„åŠŸèƒ½æ¨¡å—

#### 6.1 å®Œæ•´æ¸¸æˆç•Œé¢ âœ…
**æ–‡ä»¶**: `ui/game_ui.py`
- **GameUIç±»**: å®Œæ•´çš„ç•Œé¢æ¸²æŸ“ç³»ç»Ÿ
  - ç•Œé¢å¸ƒå±€ï¼š6ä¸ªåŠŸèƒ½åŒºåŸŸï¼Œç¬¦åˆè®¾è®¡æ–‡æ¡£
  - é¢œè‰²ç³»ç»Ÿï¼šç»Ÿä¸€çš„é¢œè‰²ç®¡ç†å’Œä¸»é¢˜
  - å­—ä½“ç®¡ç†ï¼šå¤§ä¸­å°ä¸‰ç§å­—ä½“ï¼Œå±‚æ¬¡æ¸…æ™°

#### 6.2 æˆ˜æ–—ä¿¡æ¯æ˜¾ç¤º âœ…
- **å›åˆè®¡æ•°å™¨**: å½“å‰å›åˆæ•°å’Œé˜¶æ®µæ˜¾ç¤º
- **æ•Œäººä¿¡æ¯åŒº**: åç§°ã€HPã€æ”»å‡»åŠ›ï¼ŒåŠ¨æ€é¢œè‰²
- **ç©å®¶ä¿¡æ¯åŒº**: HPã€MPã€ATKã€æŠ¤ç”²ï¼ŒçŠ¶æ€é¢œè‰²
- **ç½—ç›˜å¯è§†åŒ–**: å½“å‰ä½ç½®ã€äº‹ä»¶ç±»å‹ã€ç¬¦å·è¯´æ˜

#### 6.3 æ‰‹ç‰Œäº¤äº’ç³»ç»Ÿ âœ…
- **å¡ç‰Œæ¸²æŸ“**: 150x120åƒç´ å¡ç‰Œï¼Œè¯¦ç»†ä¿¡æ¯æ˜¾ç¤º
- **å¯ç”¨æ€§æ˜¾ç¤º**: æ ¹æ®MPåˆ¤æ–­ï¼Œç°åŒ–ä¸å¯ç”¨å¡ç‰Œ
- **ç‚¹å‡»æ£€æµ‹**: ç²¾ç¡®çš„é¼ æ ‡ç‚¹å‡»åŒºåŸŸ
- **å¡ç‰Œä¿¡æ¯**: åç§°ã€ç±»å‹ã€MPæ¶ˆè€—ã€ç½—ç›˜ç‚¹æ•°ã€æè¿°

#### 6.4 æ“ä½œæ§åˆ¶åŒºåŸŸ âœ…
- **ç»“æŸå›åˆæŒ‰é’®**: çŠ¶æ€æ„ŸçŸ¥ï¼Œæ™ºèƒ½å¯ç”¨/ç¦ç”¨
- **é‡æ–°å¼€å§‹æŒ‰é’®**: æˆ˜æ–—ç»“æŸæ—¶è‡ªåŠ¨æ˜¾ç¤º
- **çŠ¶æ€ä¿¡æ¯**: ç‰¹æ®Šæ•ˆæœã€æ“ä½œæç¤º
- **æˆ˜æ–—æ—¥å¿—**: æ»šåŠ¨æ˜¾ç¤ºæœ€è¿‘15æ¡è®°å½•

#### 6.5 ç”¨æˆ·äº¤äº’å¤„ç† âœ…
- **é¼ æ ‡æ“ä½œ**: ç‚¹å‡»å¡ç‰Œã€ç‚¹å‡»æŒ‰é’®
- **é”®ç›˜å¿«æ·é”®**: æ•°å­—é”®1-5å‡ºç‰Œã€ç©ºæ ¼ç»“æŸå›åˆã€Ré”®é‡ç½®
- **æˆ˜æ–—ç»“æœ**: èƒœåˆ©/å¤±è´¥å¼¹çª—ï¼ŒåŠé€æ˜é®ç½©

---

## é˜¶æ®µ7ï¼šæ¸¸æˆä¸»å¾ªç¯é›†æˆ âœ… å·²å®Œæˆ

### å®Œæˆæ—¶é—´
2024å¹´å½“å‰æ—¶é—´

### å®ç°çš„åŠŸèƒ½æ¨¡å—

#### 7.1 å®Œæ•´æ¸¸æˆå¾ªç¯ âœ…
**æ–‡ä»¶**: `core/game.py`
- **Gameç±»æ›´æ–°**: é›†æˆæ‰€æœ‰ç³»ç»Ÿ
  - BattleManageré›†æˆï¼šå®Œæ•´æˆ˜æ–—ç³»ç»Ÿ
  - GameUIé›†æˆï¼šå®Œæ•´ç•Œé¢ç³»ç»Ÿ
  - äº‹ä»¶å¤„ç†ï¼šé¼ æ ‡ã€é”®ç›˜ã€çª—å£äº‹ä»¶
  - æ¸¸æˆç»Ÿè®¡ï¼šè¿è¡Œæ—¶é—´ã€æˆ˜æ–—æ•°æ®ã€FPS

### éªŒæ”¶æ ‡å‡†æ£€æŸ¥ âœ…

- [x] æ¸¸æˆå¯ä»¥æ­£å¸¸å¯åŠ¨å’Œé€€å‡º
- [x] é”®ç›˜å’Œé¼ æ ‡æ“ä½œéƒ½æ­£å¸¸
- [x] å¸§ç‡ç¨³å®šåœ¨60FPS
- [x] å®Œæ•´æˆ˜æ–—æµç¨‹å¯ä»¥è¿è¡Œ
- [x] ç•Œé¢å¸ƒå±€ç¬¦åˆè®¾è®¡è¦æ±‚
- [x] æ‰€æœ‰æ¸¸æˆä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
- [x] ç½—ç›˜å¯è§†åŒ–æ­£å¸¸
- [x] é¼ æ ‡ç‚¹å‡»å“åº”æ­£ç¡®
- [x] æ‰‹ç‰Œå’ŒæŒ‰é’®äº¤äº’æ­£å¸¸
- [x] æˆ˜æ–—åˆå§‹åŒ–æ­£ç¡®
- [x] å›åˆæµç¨‹å®Œæ•´ï¼ˆå‡ºç‰Œâ†’æ•Œäººæ”»å‡»â†’ä¸‹ä¸€å›åˆï¼‰
- [x] èƒœè´Ÿåˆ¤å®šæ­£ç¡®
- [x] æˆ˜æ–—æ—¥å¿—è®°å½•å®Œæ•´

---

## æœ€ç»ˆé¡¹ç›®æˆæœ

### ğŸ‰ å®Œå…¨å¯ç©çš„å¡ç‰Œæˆ˜æ–—æ¸¸æˆ

#### æ ¸å¿ƒåŠŸèƒ½å®ç°
- **âœ… å®Œæ•´çš„å›åˆåˆ¶æˆ˜æ–—ç³»ç»Ÿ**
- **âœ… 7ç§åŸºç¡€å¡ç‰Œ + 12ç§ç½—ç›˜äº‹ä»¶**
- **âœ… æ™ºèƒ½æ•ŒäººAIå’Œæˆ˜æ–—å¹³è¡¡**
- **âœ… ç²¾ç¾çš„æ¸¸æˆç•Œé¢å’Œäº¤äº’**
- **âœ… å®Œæ•´çš„çŠ¶æ€ç®¡ç†å’Œé”™è¯¯å¤„ç†**

#### æ“ä½œæ–¹å¼
- **é¼ æ ‡æ“ä½œ**: ç‚¹å‡»å¡ç‰Œä½¿ç”¨ï¼Œç‚¹å‡»æŒ‰é’®æ§åˆ¶
- **é”®ç›˜å¿«æ·é”®**: 1-5æ•°å­—é”®å¿«é€Ÿå‡ºç‰Œï¼Œç©ºæ ¼é”®ç»“æŸå›åˆ
- **ESCé”®**: é€€å‡ºæ¸¸æˆ
- **Ré”®**: é‡æ–°å¼€å§‹ï¼ˆè°ƒè¯•åŠŸèƒ½ï¼‰

#### æ¸¸æˆç‰¹è‰²
- **ç½—ç›˜æœºåˆ¶**: ç‹¬ç‰¹çš„12ä½ç½®ç¯å½¢ç½—ç›˜ï¼Œå‡ºç‰Œæ¨è¿›è§¦å‘äº‹ä»¶
- **ç­–ç•¥æ·±åº¦**: MPç®¡ç†ã€æŠ¤ç”²ç³»ç»Ÿã€ç‰¹æ®ŠçŠ¶æ€æ•ˆæœ
- **å³æ—¶åé¦ˆ**: å®æ—¶çš„æˆ˜æ–—æ—¥å¿—å’ŒçŠ¶æ€æ˜¾ç¤º
- **è§†è§‰æ¸…æ™°**: é¢œè‰²ç¼–ç çš„HP/MPæ˜¾ç¤ºï¼Œç›´è§‚çš„å¡ç‰ŒçŠ¶æ€

---

## å½“å‰é¡¹ç›®çŠ¶æ€
- **æ•´ä½“è¿›åº¦**: ğŸ¯ **100%å®Œæˆ** - è¶…å‰å®Œæˆäº†æ‰€æœ‰è®¡åˆ’é˜¶æ®µ
- **å¯è¿è¡ŒçŠ¶æ€**: âœ… å®Œæ•´å¯ç©çš„æ¸¸æˆ
- **æµ‹è¯•çŠ¶æ€**: âœ… é€šè¿‡æ‰€æœ‰éªŒæ”¶æ ‡å‡†
- **ä»£ç è´¨é‡**: âœ… ä¸¥æ ¼çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œå®Œæ•´æ³¨é‡Š
- **ç”¨æˆ·ä½“éªŒ**: âœ… ç›´è§‚çš„ç•Œé¢ï¼Œæµç•…çš„æ“ä½œä½“éªŒ

### æŠ€æœ¯æˆå°±
- **æ¨¡å—åŒ–æ¶æ„**: 8ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œå•ä¸€èŒè´£ï¼Œæ¾è€¦åˆ
- **å®Œæ•´çš„MVCæ¨¡å¼**: æ•°æ®å±‚ã€é€»è¾‘å±‚ã€è§†å›¾å±‚åˆ†ç¦»
- **äº‹ä»¶é©±åŠ¨è®¾è®¡**: çµæ´»çš„å¡ç‰Œæ•ˆæœå’Œç½—ç›˜äº‹ä»¶ç³»ç»Ÿ
- **å¯æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°å¡ç‰Œã€æ–°æ•Œäººã€æ–°æœºåˆ¶

**ğŸ† é¡¹ç›®æˆåŠŸå®Œæˆï¼å·²å®ç°è®¾è®¡æ–‡æ¡£ä¸­çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼Œå¹¶å¯ç›´æ¥è¿è¡Œä½“éªŒå®Œæ•´çš„å¡ç‰Œæˆ˜æ–—æ¸¸æˆã€‚**

## é”™è¯¯ä¿®å¤è®°å½•

### 2024å¹´å½“å‰æ—¶é—´ï¼šä¿®å¤å¼ƒç‰Œæœºåˆ¶å¯¼è‡´çš„ç´¢å¼•é”™è¯¯

#### é—®é¢˜æè¿°
åœ¨æ¸¸æˆè¿è¡Œè¿‡ç¨‹ä¸­å‡ºç° "pop index out of range" é”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯å‘ç”Ÿåœ¨å¼ƒç‰Œæ“ä½œæ—¶ã€‚

#### ä¿®å¤å†…å®¹
**æ–‡ä»¶**: `data/events.py`
- ä¿®æ”¹äº† `discard_card_event` å‡½æ•°çš„å®ç°
- ä½¿ç”¨ `CardSystem` ç±»çš„ `remove_card_from_hand` æ–¹æ³•æ›¿ä»£ç›´æ¥çš„åˆ—è¡¨æ“ä½œ
- æ·»åŠ äº†æ›´å®‰å…¨çš„éšæœºç´¢å¼•ç”Ÿæˆæœºåˆ¶
- å¢åŠ äº†æ“ä½œç»“æœéªŒè¯

#### æŠ€æœ¯ç»†èŠ‚
```python
def discard_card_event(battle_context):
    """éšæœºå¼ƒç½®ä¸€å¼ æ‰‹ç‰Œ"""
    if len(battle_context.card_system.hand) > 0:
        card_index = random.randrange(len(battle_context.card_system.hand))
        discarded_card = battle_context.card_system.remove_card_from_hand(card_index)
        if discarded_card:
            battle_context.log(f"ä½ å¼ƒç½®äº† {discarded_card.name}")
    else:
        battle_context.log("æ‰‹ç‰Œä¸ºç©ºï¼Œæ— æ³•å¼ƒç½®")
```

#### æ”¹è¿›ç‚¹
1. ç»Ÿä¸€ä½¿ç”¨ `CardSystem` çš„æ–¹æ³•å¤„ç†æ‰‹ç‰Œæ“ä½œ
2. é¿å…äº†ç›´æ¥æ“ä½œåˆ—è¡¨å¯èƒ½å¯¼è‡´çš„ç«äº‰æ¡ä»¶
3. å¢åŠ äº†é”™è¯¯å¤„ç†å’Œç»“æœéªŒè¯
4. ä¿æŒäº†ä»£ç çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§

#### éªŒè¯æ ‡å‡†
- [x] å¼ƒç‰Œæ“ä½œä¸å†å‡ºç°ç´¢å¼•é”™è¯¯
- [x] æ‰‹ç‰Œä¸ºç©ºæ—¶èƒ½æ­£ç¡®å¤„ç†
- [x] å¼ƒç‰Œæ“ä½œèƒ½æ­£ç¡®æ›´æ–°æ¸¸æˆçŠ¶æ€
- [x] æ—¥å¿—ä¿¡æ¯å‡†ç¡®åæ˜ æ“ä½œç»“æœ 